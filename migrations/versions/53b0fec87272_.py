# -*- coding: utf-8 -*-
"""empty message

Revision ID: 53b0fec87272
Revises: 2c9d119ac26b
Create Date: 2023-10-10 23:16:44.527006

"""
import sqlalchemy as sa
from alembic import op

from app.modules.sightings.models import SightingMatchState

# revision identifiers, used by Alembic.
revision = '53b0fec87272'
down_revision = '2c9d119ac26b'


def upgrade():
    """
    Upgrade Semantic Description:
        ENTER DESCRIPTION HERE
    """
    match_state_enum = sa.Enum(
        SightingMatchState,
        name='sightingmatchstate',
        values_callable=lambda obj: [e.value for e in obj],
    )
    match_state_enum.create(op.get_bind(), checkfirst=True)

    # ### commands auto generated by Alembic - please adjust! ###
    with op.batch_alter_table('sighting', schema=None) as batch_op:
        batch_op.add_column(
            sa.Column(
                'match_state',
                match_state_enum,
                nullable=False,
                default=SightingMatchState.unreviewed.value,
                server_default=SightingMatchState.unreviewed.value,
            )
        )

    # ### end Alembic commands ###


def downgrade():
    """
    Downgrade Semantic Description:
        ENTER DESCRIPTION HERE
    """
    # ### commands auto generated by Alembic - please adjust! ###
    with op.batch_alter_table('sighting', schema=None) as batch_op:
        batch_op.drop_column('match_state')

    # Remove the enums created as part of the upgrade above
    sa.Enum(name='sightingmatchstate').drop(op.get_bind(), checkfirst=False)

    # ### end Alembic commands ###
